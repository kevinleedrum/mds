import{r as t,h as s,H as e}from"./p-f1ddf482.js";const i=class{constructor(s){t(this,s),this.disabled=!1,this.readonly=!1,this.dense=!1,this.elevated=!1,this.flat=!1,this.isFocused=!1}async onClick(t){this.menu.style.width=this.dropdownWrapper.getBoundingClientRect().width+"px";const s=t.target.closest("mx-menu-item");s&&(this.value=await s.getValue(),this.inputElem.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))}componentDidLoad(){this.updateInputValue(),this.attachMenu()}onValueChange(){this.updateInputValue()}attachMenu(){this.menu.anchorEl=this.disabled||this.readonly?void 0:this.dropdownWrapper}onBlur(){this.menu&&this.menu.isOpen||(this.isFocused=!1)}onFocus(){this.isFocused=!0,this.error=!1}onMenuClose(t){t.stopPropagation(),this.inputElem.contains(document.activeElement)||(this.isFocused=!1)}updateInputValue(){this.inputElem.value=this.value}get dropdownWrapperClass(){let t="dropdown-wrapper flex items-center relative rounded-lg";return t+=this.dense?" h-36":" h-48",this.elevated&&(t+=" elevated shadow-1"),this.flat&&(t+=" flat"),t+=this.isFocused?" focused border-2":" border",(this.disabled||this.readonly)&&(t+=" disabled"),this.error&&(t+=" error"),this.dropdownClass&&(t+=" "+this.dropdownClass),t}get inputClass(){let t="absolute inset-0 w-full h-full pl-16 overflow-hidden outline-none appearance-none select-none bg-transparent cursor-pointer disabled:cursor-auto";return this.isFocused&&(t+=" -ml-1"),t}get suffixClass(){let t="icon-suffix absolute flex items-center h-full right-12 space-x-8 pointer-events-none";return this.isFocused&&(t+=" -mr-1"),t}render(){return s(e,{class:"mx-dropdown-menu block text-3"},s("div",{ref:t=>this.dropdownWrapper=t,class:this.dropdownWrapperClass},s("input",{"aria-label":this.elAriaLabel||this.label,class:this.inputClass,id:this.dropdownId,name:this.name,onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),placeholder:this.label,disabled:this.disabled,readonly:!this.disabled,ref:t=>this.inputElem=t,tabindex:"0",type:"text"}),s("span",{class:this.suffixClass},this.suffix&&s("span",{class:"suffix flex items-center h-full px-4"},this.suffix),s("i",this.error?{class:"mds-warning-circle text-icon pointer-events-none"}:{"data-testid":"arrow",class:"mds-arrow-triangle-down text-icon"}))),this.assistiveText&&s("div",{class:"assistive-text caption1 mt-4 ml-16"},this.assistiveText),s("mx-menu",{ref:t=>this.menu=t,placement:"bottom",offset:[0,1],onMxClose:this.onMenuClose.bind(this)},s("slot",null)))}static get watchers(){return{value:["onValueChange"],disabled:["attachMenu"],readonly:["attachMenu"]}}};export{i as mx_dropdown_menu}