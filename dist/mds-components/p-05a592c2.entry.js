import{r as t,h as s,H as i}from"./p-3fc6e8e8.js";const h=class{constructor(s){t(this,s),this.isEmittingEventAfterConfirm=!1,this.type="text",this.dense=!1,this.disabled=!1,this.readonly=!1,this.outerContainerClass="",this.labelClass="",this.error=!1,this.floatLabel=!1,this.textarea=!1,this.textareaHeight="250px",this.isFocused=!1,this.isHovered=!1}onValueChange(){this.previousValue=this.value,this.mxInput.value=this.value}connectedCallback(){this.previousValue=this.value}get rightIcons(){return this.isFocused?[{icon:"mds-x",ariaLabel:"Cancel",onClick:this.onCancel.bind(this)},{icon:"mds-check",ariaLabel:"Okay",onClick:this.onConfirm.bind(this)}]:!this.isHovered||null==this.value||""===this.value||this.readonly||this.disabled?void 0:"mds-edit"}onCancel(t){t&&t.stopPropagation(),this.mxInput&&(this.mxInput.value=this.previousValue,document.activeElement&&this.mxInput.contains(document.activeElement)&&document.activeElement.blur())}onConfirm(t){if(t&&t.stopPropagation(),this.value=this.mxInput.value,this.mxInput){const t=this.mxInput.querySelector("input");this.isEmittingEventAfterConfirm=!0,t&&t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))}document.activeElement&&document.activeElement.blur()}onFocusin(){this.isFocused=!0}async onFocusout(){await new Promise(requestAnimationFrame),document.activeElement&&this.mxInput.contains(document.activeElement)||(this.isFocused=!1,this.onCancel())}onMouseEnter(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}onInput(t){this.isEmittingEventAfterConfirm?this.isEmittingEventAfterConfirm=!1:t.stopPropagation()}onKeyDown(t){"Escape"===t.key&&this.onCancel(),t.target.closest("button")||"Enter"===t.key&&this.onConfirm()}render(){return s(i,{class:"mx-confirm-input block"+(null!=this.value&&""!==this.value?" has-value":"")},s("mx-input",{ref:t=>this.mxInput=t,name:this.name,inputId:this.inputId,label:this.label,placeholder:this.placeholder,value:this.value,type:this.type,dense:this.dense,disabled:this.disabled,readonly:this.readonly,maxlength:this.maxlength,leftIcon:this.leftIcon,suffix:this.suffix,outerContainerClass:this.outerContainerClass,labelClass:this.labelClass,error:this.error,assistiveText:this.assistiveText,floatLabel:this.floatLabel,rightIcon:this.rightIcons,onFocusin:this.onFocusin.bind(this),onFocusout:this.onFocusout.bind(this),onInput:this.onInput.bind(this),onKeyDown:this.onKeyDown.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this)}))}static get watchers(){return{value:["onValueChange"]}}};export{h as mx_confirm_input}